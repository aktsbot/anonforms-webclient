import{r as a,D as p,a as g,j as e,P as b,L as i,m as k,b as N,g as f}from"./index-CXqG7qat.js";function D(){const o=a.useContext(p),[l,x]=a.useState([]),[u,j]=a.useState(0),[t,d]=a.useState(1),[r,m]=a.useState(1);a.useEffect(()=>{const s=g.CancelToken.source();async function c(){try{const n=await N({page:t,req_cancel_token:s.token});x(n.data.forms),j(n.data.count),m(n.data.total_pages)}catch(n){o({type:"alertMessage",value:f(n),message_type:"danger",heading:"Error"})}}return c(),()=>s.cancel()},[o,t]);function h(s){s==="p"&&t!==1&&d(t-1),s==="n"&&t<r&&d(t+1)}return e.jsxs(b,{title:"Your dashboard",showHeader:!0,children:[e.jsx("h1",{className:"head-underline",children:"Dashboard"}),l.length===0&&e.jsxs("div",{className:"msg",children:["Forms that you make will be listed here. Create a form by visiting"," ",e.jsx(i,{to:"new-form",children:"New form"})," on the navigation menu."]}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Title + creation date YYYY/MM/DD"}),e.jsx("th",{children:"Link"}),e.jsx("th",{children:"Responses"})]})}),e.jsx("tbody",{children:l.map((s,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:c+1}),e.jsxs("td",{children:[e.jsx("span",{children:s.title})," -"," ",e.jsx("small",{children:e.jsx("code",{children:k(s.createdAt)})})]}),e.jsx("td",{children:e.jsx(i,{to:`/${s.uri}`,children:s.uri})}),e.jsx("td",{children:s.response_count>0?e.jsx(i,{to:`/${s.uri}/responses`,children:s.response_count}):e.jsx("span",{children:s.response_count})})]},s.uuid))})]}),e.jsxs("div",{className:"row m-y-sm",children:[r>0&&e.jsxs("div",{className:"col c6",children:[t>1&&e.jsx("button",{className:"btn-link",onClick:()=>h("p"),children:"<PrevÂ "}),"Page ",t," of ",r+" ",t<r&&e.jsx("button",{className:"btn-link",onClick:()=>h("n"),children:"Next>"})]}),e.jsxs("div",{className:"col c6",children:[u," forms in total"]})]})]})}export{D as default};

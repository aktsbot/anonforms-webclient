import{r as c,D as x,e as g,a as v,j as e,N as y,P as j,i as b,g as q}from"./index-CXqG7qat.js";function w(){const u=c.useContext(x),d={title:"",description:"",uri:"",questions:[],submitCount:0,isFormCreated:!1},h=(s,t)=>{switch(t.type){case"titleChange":s.title=t.value,s.uri=t.value.toLowerCase().replace(/ /g,"-");return;case"descriptionChange":s.description=t.value;return;case"addQuestion":let n={id:new Date().getTime(),is_required:!1,title:""};t.value==="simple_text"||t.value==="large_text"?n={...n,question_type:t.value}:(t.value==="radio"||t.value==="checkbox"||t.value==="dropdown")&&(n={...n,question_type:t.value,question_options:[{id:new Date().getTime(),title:""}]}),s.questions.push(n);return;case"removeQuestion":s.questions.splice(t.value,1);return;case"moveQuestionUp":const i=s.questions[t.value-1],l=s.questions[t.value];s.questions[t.value-1]=l,s.questions[t.value]=i;return;case"questionTitleChange":s.questions[t.index].title=t.value;return;case"addRadioOption":case"addCheckboxOption":case"addDropdownOption":s.questions[t.value].question_options.push({id:new Date().getTime(),title:""});return;case"questionOptionChange":s.questions[t.questionIndex].question_options[t.optionIndex].title=t.value;return;case"removeRadioOption":case"removeCheckboxOption":case"removeDropdownOption":s.questions[t.questionIndex].question_options.splice(t.optionIndex,1);return;case"submitForm":s.submitCount+=1;return;case"formCreated":s.isFormCreated=!0;return;default:return}},[a,o]=g(h,d),m=c.useMemo(()=>{if(!a.title||!a.description||!a.uri||!a.questions.length)return!1;for(const s of a.questions){if(!s.title)return!1;if(s.question_type==="radio"||s.question_type==="checkbox"||s.question_type==="dropdown"){if(!s.question_options.length)return!1;for(const t of s.question_options)if(!t.title)return!1}}return!0},[a]);return c.useEffect(()=>{const s=v.CancelToken.source();async function t(n){try{await b({payload:n,req_cancel_token:s.token}),u({type:"alertMessage",value:"Your form has been created",message_type:"success",heading:"Woot woot!"}),o({type:"formCreated"})}catch(i){u({type:"alertMessage",value:q(i),message_type:"danger",heading:"Error"})}}if(a.submitCount){const n={title:a.title,description:a.description,uri:a.uri,questions:a.questions.map(i=>{let l={...i};return delete l.id,l.question_options&&(l.question_options=l.question_options.map(r=>{let p={...r};return delete p.id,p})),l})};t(n)}return()=>s.cancel()},[a.submitCount,u,o,a.title,a.description,a.questions,a.uri]),a.isFormCreated?e.jsx(y,{to:"/dashboard"}):e.jsxs(j,{title:"Create your new form",showHeader:!0,children:[e.jsx("h1",{className:"head-underline",children:"Create your new form"}),e.jsx("div",{className:"msg",children:"Remember to give your form a short title and give it a good description to make it very clear to the recipient, what you are asking them."}),e.jsxs("div",{className:"w-100",children:[e.jsx("p",{children:"What is your form's title?"}),e.jsx("input",{type:"text",className:"smooth w-100",placeholder:"Registration form for Foo Conference",onChange:s=>o({type:"titleChange",value:s.target.value})})]}),e.jsxs("div",{className:"w-100",children:[e.jsx("p",{children:"Give it a good description"}),e.jsx("textarea",{className:"smooth w-100",placeholder:"People who wish to submit their RSVP for the conference may give their details below. Thank you for your interest.",onChange:s=>o({type:"descriptionChange",value:s.target.value})})]}),e.jsx("h2",{className:"head-underline",children:"Questions"}),a.questions.length===0&&e.jsx("p",{children:"No questions added yet!"}),a.questions.map((s,t)=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"w-100",children:[e.jsx("p",{children:e.jsxs("strong",{children:["Q",t+1]})}),e.jsxs("small",{className:"grey",children:[s.question_type==="simple_text"&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Simple text:"})," displays as a normal input box on the form."]}),s.question_type==="large_text"&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Large text:"})," displays as a textarea on the form."]}),s.question_type==="radio"&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Radio:"})," displays as a group of radio options on the form. User would select only one option."]}),s.question_type==="checkbox"&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Checkbox:"})," displays as a group of checkboxes on the form. User would select more than one checkbox."]}),s.question_type==="dropdown"&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Dropdown:"})," displays as a dropdown on the form. This is useful if this question has a lot of options to choose from. User would select only one option."]})]}),e.jsx("p",{children:"Question text"}),s.question_type==="simple_text"&&e.jsx("input",{type:"text",className:"smooth w-100",placeholder:"What is your name? ",onChange:n=>o({type:"questionTitleChange",value:n.target.value,index:t})}),s.question_type==="large_text"&&e.jsx("input",{type:"text",className:"smooth w-100",placeholder:"Describe your daily routines in detail? ",onChange:n=>o({type:"questionTitleChange",value:n.target.value,index:t})}),s.question_type==="radio"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",className:"smooth w-100",placeholder:"Are you married? ",onChange:n=>o({type:"questionTitleChange",value:n.target.value,index:t})}),e.jsx("p",{children:"Question options"}),s.question_options.map((n,i)=>{let l=i?"m-t-sm":"";return e.jsxs("div",{children:[e.jsx("input",{type:"text",className:`smooth w-100 ${l}`,placeholder:i%2===0?"Yes":"No",onChange:r=>o({type:"questionOptionChange",value:r.target.value,optionIndex:i,questionIndex:t})}),i!==0&&e.jsx("button",{className:"btn-link small",onClick:()=>o({type:"removeRadioOption",questionIndex:t,optionIndex:i}),children:"Remove option"})]},`radio-opts--${n.id}`)}),e.jsx("div",{className:"m-t-sm",children:e.jsx("button",{className:"btn-link",onClick:()=>o({type:"addRadioOption",value:t}),children:"Add new option"})})]}),s.question_type==="checkbox"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",className:"smooth w-100",placeholder:"Please choose the items you are allergic to? ",onChange:n=>o({type:"questionTitleChange",value:n.target.value,index:t})}),e.jsx("p",{children:"Question options"}),s.question_options.map((n,i)=>{let l=i?"m-t-sm":"";return e.jsxs("div",{children:[e.jsx("input",{type:"text",className:`smooth w-100 ${l}`,placeholder:i%2===0?"Peanuts":"Strawberries",onChange:r=>o({type:"questionOptionChange",value:r.target.value,optionIndex:i,questionIndex:t})}),i!==0&&e.jsx("button",{className:"btn-link small",onClick:()=>o({type:"removeCheckboxOption",questionIndex:t,optionIndex:i}),children:"Remove option"})]},`checkbox-opts--${n.id}`)}),e.jsx("div",{className:"m-t-sm",children:e.jsx("button",{className:"btn-link",onClick:()=>o({type:"addCheckboxOption",value:t}),children:"Add new option"})})]}),s.question_type==="dropdown"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",className:"smooth w-100",placeholder:"Which state are you from? ",onChange:n=>o({type:"questionTitleChange",value:n.target.value,index:t})}),e.jsx("p",{children:"Question options"}),s.question_options.map((n,i)=>{let l=i?"m-t-sm":"";return e.jsxs("div",{children:[e.jsx("input",{type:"text",className:`smooth w-100 ${l}`,placeholder:i%2===0?"Karnataka":"Punjab",onChange:r=>o({type:"questionOptionChange",value:r.target.value,optionIndex:i,questionIndex:t})}),i!==0&&e.jsx("button",{className:"btn-link small",onClick:()=>o({type:"removeCheckboxOption",questionIndex:t,optionIndex:i}),children:"Remove option"})]},`dropdown-opts--${n.id}`)}),e.jsx("div",{className:"m-t-sm",children:e.jsx("button",{className:"btn-link",onClick:()=>o({type:"addDropdownOption",value:t}),children:"Add new option"})})]})]}),e.jsxs("div",{className:"m-t-sm text-right",children:[t!==0&&e.jsx("button",{className:"btn btn-sm btn-a",onClick:()=>o({type:"moveQuestionUp",value:t}),children:"Move up"}),e.jsx("button",{className:"btn btn-sm btn-c m-l-sm",onClick:()=>{console.log(t),o({type:"removeQuestion",value:t})},children:"Remove question"})]})]},"q--"+s.id)),e.jsxs("div",{className:"msg m-t-sm",children:[e.jsx("p",{children:"To add a question, please click on any one of the items below."}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("button",{className:"btn-link",onClick:()=>o({type:"addQuestion",value:"simple_text"}),children:"Simple text"})," ","- for single line answers."]}),e.jsxs("li",{children:[e.jsx("button",{className:"btn-link",onClick:()=>o({type:"addQuestion",value:"large_text"}),children:"Large text"})," ","- for answers taking up multiple lines."]}),e.jsxs("li",{children:[e.jsx("button",{className:"btn-link",onClick:()=>o({type:"addQuestion",value:"radio"}),children:"Radio"})," ","- for questions that can have only one right answer."]}),e.jsxs("li",{children:[e.jsx("button",{className:"btn-link",onClick:()=>o({type:"addQuestion",value:"checkbox"}),children:"Checkbox"})," ","- for questions that can have multiple right answers."]}),e.jsxs("li",{children:[e.jsx("button",{className:"btn-link",onClick:()=>o({type:"addQuestion",value:"dropdown"}),children:"Dropdown"})," ","- for questions that have a huge list of answers to choose from."]})]})]}),e.jsx("div",{className:"text-center m-b-sm m-t-sm",children:e.jsx("button",{className:"btn btn-b",disabled:!m,onClick:()=>o({type:"submitForm"}),children:"Submit and create my form"})})]})}export{w as default};
